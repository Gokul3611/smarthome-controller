(kicad_pcb (version 20211014) (generator pcbnew)

  (general
    (thickness 1.6)
    (drawings 12)
    (tracks 180)
    (zones 2)
    (modules 45)
    (nets 37)
  )

  (page "A3")

  (title_block
    (title "Smart Home Controller PCB")
    (date "2024-12-16")
    (rev "Rev A")
    (company "Smart Home Controller Project")
    (comment 1 "4-Channel TRIAC Dimmer with ESP32")
    (comment 2 "Zero-Cross Detection and WiFi Control")
    (comment 3 "JLCPCB Manufacturing Ready")
    (comment 4 "6mm AC/DC Isolation at Y=26mm")
  )

  (layers
    (0 "F.Cu" signal)
    (31 "B.Cu" signal)
    (32 "B.Adhes" user "B.Adhesive")
    (33 "F.Adhes" user "F.Adhesive")
    (34 "B.Paste" user)
    (35 "F.Paste" user)
    (36 "B.SilkS" user "B.Silkscreen")
    (37 "F.SilkS" user "F.Silkscreen")
    (38 "B.Mask" user)
    (39 "F.Mask" user)
    (40 "Dwgs.User" user "User.Drawings")
    (41 "Cmts.User" user "User.Comments")
    (42 "Eco1.User" user "User.Eco1")
    (43 "Eco2.User" user "User.Eco2")
    (44 "Edge.Cuts" user)
    (45 "Margin" user)
    (46 "B.CrtYd" user "B.Courtyard")
    (47 "F.CrtYd" user "F.Courtyard")
    (48 "B.Fab" user)
    (49 "F.Fab" user)
  )

  (setup
    (stackup
      (layer "F.SilkS" (type "Top Silk Screen"))
      (layer "F.Paste" (type "Top Solder Paste"))
      (layer "F.Mask" (type "Top Solder Mask") (thickness 0.01))
      (layer "F.Cu" (type "copper") (thickness 0.07))
      (layer "dielectric 1" (type "core") (thickness 1.46) (material "FR4") (epsilon_r 4.5) (loss_tangent 0.02))
      (layer "B.Cu" (type "copper") (thickness 0.07))
      (layer "B.Mask" (type "Bottom Solder Mask") (thickness 0.01))
      (layer "B.Paste" (type "Bottom Solder Paste"))
      (layer "B.SilkS" (type "Bottom Silk Screen"))
      (copper_finish "HASL")
      (dielectric_constraints no)
    )
    (pad_to_mask_clearance 0)
    (pcbplotparams
      (layerselection 0x00010fc_ffffffff)
      (disableapertmacros false)
      (usegerberextensions false)
      (usegerberattributes true)
      (usegerberadvancedattributes true)
      (creategerberjobfile true)
      (svguseinch false)
      (svgprecision 6)
      (excludeedgelayer true)
      (plotframeref false)
      (viasonmask false)
      (mode 1)
      (useauxorigin false)
      (hpglpennumber 1)
      (hpglpenspeed 20)
      (hpglpendiameter 15.000000)
      (dxfpolygonmode true)
      (dxfimperialunits true)
      (dxfusepcbnewfont true)
      (psnegative false)
      (psa4output false)
      (plotreference true)
      (plotvalue true)
      (plotinvisibletext false)
      (sketchpadsonfab false)
      (subtractmaskfromsilk false)
      (outputformat 1)
      (mirror false)
      (drillshape 1)
      (scaleselection 1)
      (outputdirectory "gerber/")
    )
  )

  (net 0 "")
  (net 1 "GND")
  (net 2 "+5V")
  (net 3 "+3V3")
  (net 4 "ZCD")
  (net 5 "TRIAC1")
  (net 6 "TRIAC2")
  (net 7 "TRIAC3")
  (net 8 "TRIAC4")
  (net 9 "SW1")
  (net 10 "SW2")
  (net 11 "SW3")
  (net 12 "SW4")
  (net 13 "AC_LIVE")
  (net 14 "AC_NEUTRAL")
  (net 15 "AC_L1")
  (net 16 "AC_L2")
  (net 17 "AC_L3")
  (net 18 "AC_L4")
  (net 19 "GPIO13")
  (net 20 "GPIO16")
  (net 21 "GPIO17")
  (net 22 "GPIO18")
  (net 23 "GPIO19")
  (net 24 "GPIO32")
  (net 25 "GPIO33")
  (net 26 "GPIO25")
  (net 27 "GPIO26")
  (net 28 "Net-(U2-Pad1)")
  (net 29 "Net-(U3-Pad1)")
  (net 30 "Net-(U4-Pad1)")
  (net 31 "Net-(U5-Pad1)")
  (net 32 "Net-(U6-Pad1)")
  (net 33 "Net-(Q1-Pad3)")
  (net 34 "Net-(Q2-Pad3)")
  (net 35 "Net-(Q3-Pad3)")
  (net 36 "Net-(Q4-Pad3)")

  (net_class "Default" "Default net class."
    (clearance 0.2)
    (trace_width 0.3)
    (via_dia 0.8)
    (via_drill 0.5)
    (uvia_dia 0.3)
    (uvia_drill 0.1)
    (add_net "+3V3")
    (add_net "GND")
    (add_net "ZCD")
    (add_net "TRIAC1")
    (add_net "TRIAC2")
    (add_net "TRIAC3")
    (add_net "TRIAC4")
    (add_net "SW1")
    (add_net "SW2")
    (add_net "SW3")
    (add_net "SW4")
    (add_net "GPIO13")
    (add_net "GPIO16")
    (add_net "GPIO17")
    (add_net "GPIO18")
    (add_net "GPIO19")
    (add_net "GPIO32")
    (add_net "GPIO33")
    (add_net "GPIO25")
    (add_net "GPIO26")
  )

  (net_class "Power" "Power nets"
    (clearance 0.2)
    (trace_width 0.8)
    (via_dia 1.0)
    (via_drill 0.6)
    (uvia_dia 0.3)
    (uvia_drill 0.1)
    (add_net "+5V")
  )

  (net_class "AC_HV" "AC High Voltage nets"
    (clearance 0.8)
    (trace_width 1.5)
    (via_dia 1.2)
    (via_drill 0.8)
    (uvia_dia 0.3)
    (uvia_drill 0.1)
    (add_net "AC_LIVE")
    (add_net "AC_NEUTRAL")
    (add_net "AC_L1")
    (add_net "AC_L2")
    (add_net "AC_L3")
    (add_net "AC_L4")
  )

  (gr_line (start 0 0) (end 100 0) (layer "Edge.Cuts") (width 0.1) (tstamp 00000000-0001))
  (gr_line (start 100 0) (end 100 80) (layer "Edge.Cuts") (width 0.1) (tstamp 00000000-0002))
  (gr_line (start 100 80) (end 0 80) (layer "Edge.Cuts") (width 0.1) (tstamp 00000000-0003))
  (gr_line (start 0 80) (end 0 0) (layer "Edge.Cuts") (width 0.1) (tstamp 00000000-0004))

  (gr_text "AC/DC ISOLATION BARRIER - 6mm CLEARANCE" (at 50 26 0) (layer "Cmts.User") (tstamp 00000000-0005)
    (effects (font (size 2 2) (thickness 0.3)) (justify center))
  )
  
  (gr_line (start 0 20) (end 100 20) (layer "Cmts.User") (width 0.2) (tstamp 00000000-0006))
  (gr_line (start 0 26) (end 100 26) (layer "Cmts.User") (width 0.2) (tstamp 00000000-0007))
  
  (gr_text "HIGH VOLTAGE AC ZONE" (at 50 10 0) (layer "Cmts.User") (tstamp 00000000-0008)
    (effects (font (size 1.5 1.5) (thickness 0.25) bold) (justify center))
  )
  
  (gr_text "LOW VOLTAGE DC ZONE" (at 50 70 0) (layer "Cmts.User") (tstamp 00000000-0009)
    (effects (font (size 1.5 1.5) (thickness 0.25) bold) (justify center))
  )

  (gr_text "Smart Home Controller Rev A" (at 50 3 0) (layer "F.SilkS") (tstamp 00000000-000a)
    (effects (font (size 1.2 1.2) (thickness 0.2)) (justify center))
  )

  (dimension (type aligned) (layer "Dwgs.User") (tstamp 00000000-000b)
    (pts (xy 0 20) (xy 0 26))
    (height 5)
    (gr_text "6.00 mm" (at -5 23 0) (layer "Dwgs.User") (tstamp 00000000-000c)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (format (prefix "") (suffix "") (units 3) (units_format 1) (precision 2))
    (style (thickness 0.1) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0.5) keep_text_aligned)
  )

  (zone (net 1) (net_name "GND") (layer "B.Cu") (tstamp 00000000-1001) (hatch edge 0.508)
    (connect_pads (clearance 0.508))
    (min_thickness 0.254)
    (keepout (tracks not_allowed) (vias not_allowed) (pads not_allowed) (copperpour not_allowed) (footprints not_allowed))
    (fill yes (thermal_gap 0.508) (thermal_bridge_width 0.508))
    (polygon
      (pts
        (xy 2 28)
        (xy 98 28)
        (xy 98 78)
        (xy 2 78)
      )
    )
  )

  (zone (net 0) (net_name "") (layer "F.Cu") (tstamp 00000000-1002) (hatch edge 0.508)
    (connect_pads (clearance 0.508))
    (min_thickness 0.254)
    (keepout (tracks allowed) (vias allowed) (pads allowed) (copperpour not_allowed) (footprints allowed))
    (fill no)
    (polygon
      (pts
        (xy 0 20)
        (xy 100 20)
        (xy 100 26)
        (xy 0 26)
      )
    )
  )

  (footprint "RF_Module:ESP32-WROOM-32" (layer "F.Cu")
    (tedit 5E5A2000) (tstamp 00000001-0000-0000-0000-000000000001)
    (at 50 55 0)
    (descr "ESP32-WROOM-32 WiFi+BT Module")
    (tags "ESP32 WiFi BT")
    (property "Reference" "U1" (at 0 -11 0) (layer "F.SilkS")
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Value" "ESP32-WROOM-32" (at 0 11 0) (layer "F.Fab")
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Footprint" "RF_Module:ESP32-WROOM-32" (at 0 0 0) (layer "F.Fab") hide
      (effects (font (size 1.27 1.27) (thickness 0.15)))
    )
    (attr smd)
    (fp_text reference "U1" (at 0 -11 0) (layer "F.SilkS")
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (fp_text value "ESP32-WROOM-32" (at 0 11 0) (layer "F.Fab")
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (fp_line (start -9 -9.8) (end 9 -9.8) (layer "F.SilkS") (width 0.12))
    (fp_line (start -9 9.8) (end 9 9.8) (layer "F.SilkS") (width 0.12))
    (fp_line (start -9 -9.8) (end -9 9.8) (layer "F.SilkS") (width 0.12))
    (fp_line (start 9 -9.8) (end 9 9.8) (layer "F.SilkS") (width 0.12))
    (pad "1" smd rect (at -8.5 -5.715) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND"))
    (pad "2" smd rect (at -8.5 -4.445) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 3 "+3V3"))
    (pad "8" smd rect (at -8.5 2.225) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 24 "GPIO32"))
    (pad "9" smd rect (at -8.5 3.495) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 25 "GPIO33"))
    (pad "10" smd rect (at -8.5 4.765) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 26 "GPIO25"))
    (pad "11" smd rect (at -8.5 6.035) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 27 "GPIO26"))
    (pad "15" smd rect (at 8.5 -4.445) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 19 "GPIO13"))
    (pad "20" smd rect (at 8.5 1.905) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 20 "GPIO16"))
    (pad "21" smd rect (at 8.5 3.175) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 21 "GPIO17"))
    (pad "23" smd rect (at 8.5 5.715) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 22 "GPIO18"))
    (pad "24" smd rect (at 8.5 6.985) (size 2 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 23 "GPIO19"))
    (pad "38" smd rect (at -5 8.26) (size 0.9 2) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND"))
    (pad "39" smd rect (at 0 8.26) (size 0.9 2) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND"))
    (model "${KICAD6_3DMODEL_DIR}/RF_Module.3dshapes/ESP32-WROOM-32.wrl"
      (offset (xyz 0 0 0))
      (scale (xyz 1 1 1))
      (rotate (xyz 0 0 0))
    )
  )

  (footprint "Package_TO_SOT_THT:TO-220-3_Vertical" (layer "F.Cu")
    (tedit 5AC8BA0D) (tstamp 00000001-0000-0000-0000-000000000010)
    (at 25 10 0)
    (descr "TO-220-3, Vertical, RM 2.54mm")
    (tags "TO-220-3 Vertical RM 2.54mm")
    (property "Reference" "Q1" (at 2.54 -3.81 0) (layer "F.SilkS")
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Value" "BT136-600E" (at 2.54 3.81 0) (layer "F.Fab")
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Footprint" "Package_TO_SOT_THT:TO-220-3_Vertical" (at 0 0 0) (layer "F.Fab") hide
      (effects (font (size 1.27 1.27) (thickness 0.15)))
    )
    (attr through_hole)
    (fp_line (start -2.54 -2.54) (end 7.62 -2.54) (layer "F.SilkS") (width 0.12))
    (fp_line (start -2.54 2.54) (end 7.62 2.54) (layer "F.SilkS") (width 0.12))
    (pad "1" thru_hole rect (at 0 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 15 "AC_L1"))
    (pad "2" thru_hole circle (at 2.54 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 13 "AC_LIVE"))
    (pad "3" thru_hole circle (at 5.08 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 33 "Net-(Q1-Pad3)"))
    (pad "" thru_hole circle (at 0 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
  )

  (footprint "Package_TO_SOT_THT:TO-220-3_Vertical" (layer "F.Cu")
    (tedit 5AC8BA0D) (tstamp 00000001-0000-0000-0000-000000000011)
    (at 35 10 0)
    (property "Reference" "Q2" (at 2.54 -3.81 0) (layer "F.SilkS"))
    (property "Value" "BT136-600E" (at 2.54 3.81 0) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 16 "AC_L2"))
    (pad "2" thru_hole circle (at 2.54 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 13 "AC_LIVE"))
    (pad "3" thru_hole circle (at 5.08 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 34 "Net-(Q2-Pad3)"))
    (pad "" thru_hole circle (at 0 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
  )

  (footprint "Package_TO_SOT_THT:TO-220-3_Vertical" (layer "F.Cu")
    (tedit 5AC8BA0D) (tstamp 00000001-0000-0000-0000-000000000012)
    (at 45 10 0)
    (property "Reference" "Q3" (at 2.54 -3.81 0) (layer "F.SilkS"))
    (property "Value" "BT136-600E" (at 2.54 3.81 0) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 17 "AC_L3"))
    (pad "2" thru_hole circle (at 2.54 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 13 "AC_LIVE"))
    (pad "3" thru_hole circle (at 5.08 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 35 "Net-(Q3-Pad3)"))
    (pad "" thru_hole circle (at 0 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
  )

  (footprint "Package_TO_SOT_THT:TO-220-3_Vertical" (layer "F.Cu")
    (tedit 5AC8BA0D) (tstamp 00000001-0000-0000-0000-000000000013)
    (at 55 10 0)
    (property "Reference" "Q4" (at 2.54 -3.81 0) (layer "F.SilkS"))
    (property "Value" "BT136-600E" (at 2.54 3.81 0) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 18 "AC_L4"))
    (pad "2" thru_hole circle (at 2.54 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 13 "AC_LIVE"))
    (pad "3" thru_hole circle (at 5.08 0) (size 1.8 1.8) (drill 1.0) (layers *.Cu *.Mask)
      (net 36 "Net-(Q4-Pad3)"))
    (pad "" thru_hole circle (at 0 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 2) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 3) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 0 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 1 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
    (pad "" thru_hole circle (at 2 4) (size 0.5 0.5) (drill 0.5) (layers *.Cu)
      (net 1 "GND") (zone_connect 2))
  )

  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tedit 5A02E8C5) (tstamp 00000001-0000-0000-0000-000000000020)
    (at 25 23 90)
    (descr "6-lead though-hole mounted DIP package, row spacing 7.62 mm (300 mils)")
    (tags "THT DIP DIL PDIP 2.54mm 7.62mm 300mil")
    (property "Reference" "U2" (at 3.81 -2.33 90) (layer "F.SilkS"))
    (property "Value" "MOC3021" (at 3.81 7.41 90) (layer "F.Fab"))
    (attr through_hole)
    (fp_line (start 1.16 -1.33) (end 1.16 6.41) (layer "F.SilkS") (width 0.12))
    (fp_line (start 6.46 -1.33) (end 6.46 6.41) (layer "F.SilkS") (width 0.12))
    (pad "1" thru_hole rect (at 0 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 28 "Net-(U2-Pad1)"))
    (pad "2" thru_hole circle (at 0 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 1 "GND"))
    (pad "4" thru_hole circle (at 7.62 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 33 "Net-(Q1-Pad3)"))
    (pad "6" thru_hole circle (at 7.62 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 15 "AC_L1"))
  )

  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tedit 5A02E8C5) (tstamp 00000001-0000-0000-0000-000000000021)
    (at 35 23 90)
    (property "Reference" "U3" (at 3.81 -2.33 90) (layer "F.SilkS"))
    (property "Value" "MOC3021" (at 3.81 7.41 90) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 29 "Net-(U3-Pad1)"))
    (pad "2" thru_hole circle (at 0 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 1 "GND"))
    (pad "4" thru_hole circle (at 7.62 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 34 "Net-(Q2-Pad3)"))
    (pad "6" thru_hole circle (at 7.62 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 16 "AC_L2"))
  )

  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tedit 5A02E8C5) (tstamp 00000001-0000-0000-0000-000000000022)
    (at 45 23 90)
    (property "Reference" "U4" (at 3.81 -2.33 90) (layer "F.SilkS"))
    (property "Value" "MOC3021" (at 3.81 7.41 90) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 30 "Net-(U4-Pad1)"))
    (pad "2" thru_hole circle (at 0 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 1 "GND"))
    (pad "4" thru_hole circle (at 7.62 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 35 "Net-(Q3-Pad3)"))
    (pad "6" thru_hole circle (at 7.62 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 17 "AC_L3"))
  )

  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tedit 5A02E8C5) (tstamp 00000001-0000-0000-0000-000000000023)
    (at 55 23 90)
    (property "Reference" "U5" (at 3.81 -2.33 90) (layer "F.SilkS"))
    (property "Value" "MOC3021" (at 3.81 7.41 90) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 31 "Net-(U5-Pad1)"))
    (pad "2" thru_hole circle (at 0 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 1 "GND"))
    (pad "4" thru_hole circle (at 7.62 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 36 "Net-(Q4-Pad3)"))
    (pad "6" thru_hole circle (at 7.62 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 18 "AC_L4"))
  )

  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tedit 5A02E8C5) (tstamp 00000001-0000-0000-0000-000000000030)
    (at 75 15 90)
    (property "Reference" "U6" (at 3.81 -2.33 90) (layer "F.SilkS"))
    (property "Value" "4N25" (at 3.81 7.41 90) (layer "F.Fab"))
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 32 "Net-(U6-Pad1)"))
    (pad "2" thru_hole circle (at 0 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 1 "GND"))
    (pad "4" thru_hole circle (at 7.62 2.54 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 1 "GND"))
    (pad "5" thru_hole circle (at 7.62 0 90) (size 1.6 1.6) (drill 0.8) (layers *.Cu *.Mask)
      (net 19 "GPIO13"))
  )

  (footprint "Package_TO_SOT_SMD:SOT-223-3_TabPin2" (layer "F.Cu")
    (tedit 5A02FF57) (tstamp 00000001-0000-0000-0000-000000000040)
    (at 20 50 0)
    (descr "module CMS SOT223 4 pins")
    (tags "CMS SOT")
    (property "Reference" "U7" (at 0 -4.5 0) (layer "F.SilkS"))
    (property "Value" "AMS1117-5.0" (at 0 4.5 0) (layer "F.Fab"))
    (attr smd)
    (fp_line (start -1.85 -3.35) (end 1.85 -3.35) (layer "F.SilkS") (width 0.12))
    (fp_line (start -1.85 3.35) (end 1.85 3.35) (layer "F.SilkS") (width 0.12))
    (pad "1" smd rect (at -3.15 -2.3 0) (size 2 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND"))
    (pad "2" smd rect (at -3.15 0 0) (size 2 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 2 "+5V"))
    (pad "3" smd rect (at -3.15 2.3 0) (size 2 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 13 "AC_LIVE"))
  )

  (segment (start 25 10) (end 25 15) (width 1.5) (layer "F.Cu") (net 13))
  (segment (start 35 10) (end 35 15) (width 1.5) (layer "F.Cu") (net 13))
  (segment (start 45 10) (end 45 15) (width 1.5) (layer "F.Cu") (net 13))
  (segment (start 55 10) (end 55 15) (width 1.5) (layer "F.Cu") (net 13))
  (segment (start 25 15) (end 35 15) (width 1.5) (layer "F.Cu") (net 13))
  (segment (start 35 15) (end 45 15) (width 1.5) (layer "F.Cu") (net 13))
  (segment (start 45 15) (end 55 15) (width 1.5) (layer "F.Cu") (net 13))

  (segment (start 41.5 55) (end 28 55) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 28 55) (end 25 52) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 75 22.62) (end 70 27.62) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 70 27.62) (end 70 50) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 70 50) (end 60 50) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 60 50) (end 59 51) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 59 51) (end 59 53.81) (width 0.3) (layer "F.Cu") (net 19))
  (segment (start 59 53.81) (end 58.5 54.31) (width 0.3) (layer "F.Cu") (net 19))

  (segment (start 58.5 56.81) (end 65 56.81) (width 0.3) (layer "F.Cu") (net 20))
  (segment (start 65 56.81) (end 67 54.81) (width 0.3) (layer "F.Cu") (net 20))
  (segment (start 67 54.81) (end 67 35) (width 0.3) (layer "F.Cu") (net 20))
  (segment (start 67 35) (end 64 32) (width 0.3) (layer "F.Cu") (net 20))
  (segment (start 64 32) (end 30 32) (width 0.3) (layer "F.Cu") (net 20))
  (segment (start 30 32) (end 25 27) (width 0.3) (layer "F.Cu") (net 20))
  (segment (start 25 27) (end 25 23) (width 0.3) (layer "F.Cu") (net 20))

  (segment (start 58.5 58.08) (end 64 58.08) (width 0.3) (layer "F.Cu") (net 21))
  (segment (start 64 58.08) (end 66 56.08) (width 0.3) (layer "F.Cu") (net 21))
  (segment (start 66 56.08) (end 66 36) (width 0.3) (layer "F.Cu") (net 21))
  (segment (start 66 36) (end 62 32) (width 0.3) (layer "F.Cu") (net 21))
  (segment (start 62 32) (end 40 32) (width 0.3) (layer "F.Cu") (net 21))
  (segment (start 40 32) (end 35 27) (width 0.3) (layer "F.Cu") (net 21))
  (segment (start 35 27) (end 35 23) (width 0.3) (layer "F.Cu") (net 21))

  (segment (start 58.5 61.62) (end 63 61.62) (width 0.3) (layer "F.Cu") (net 22))
  (segment (start 63 61.62) (end 65 59.62) (width 0.3) (layer "F.Cu") (net 22))
  (segment (start 65 59.62) (end 65 37) (width 0.3) (layer "F.Cu") (net 22))
  (segment (start 65 37) (end 60 32) (width 0.3) (layer "F.Cu") (net 22))
  (segment (start 60 32) (end 50 32) (width 0.3) (layer "F.Cu") (net 22))
  (segment (start 50 32) (end 45 27) (width 0.3) (layer "F.Cu") (net 22))
  (segment (start 45 27) (end 45 23) (width 0.3) (layer "F.Cu") (net 22))

  (segment (start 58.5 62.89) (end 62 62.89) (width 0.3) (layer "F.Cu") (net 23))
  (segment (start 62 62.89) (end 64 60.89) (width 0.3) (layer "F.Cu") (net 23))
  (segment (start 64 60.89) (end 64 38) (width 0.3) (layer "F.Cu") (net 23))
  (segment (start 64 38) (end 58 32) (width 0.3) (layer "F.Cu") (net 23))
  (segment (start 58 32) (end 55 29) (width 0.3) (layer "F.Cu") (net 23))
  (segment (start 55 29) (end 55 23) (width 0.3) (layer "F.Cu") (net 23))

  (segment (start 41.5 57.13) (end 38 57.13) (width 0.3) (layer "F.Cu") (net 24))
  (segment (start 38 57.13) (end 35 60.13) (width 0.3) (layer "F.Cu") (net 24))
  (segment (start 35 60.13) (end 35 68) (width 0.3) (layer "F.Cu") (net 24))
  (segment (start 35 68) (end 30 73) (width 0.3) (layer "F.Cu") (net 24))

  (segment (start 41.5 58.4) (end 37 58.4) (width 0.3) (layer "F.Cu") (net 25))
  (segment (start 37 58.4) (end 34 61.4) (width 0.3) (layer "F.Cu") (net 25))
  (segment (start 34 61.4) (end 34 68) (width 0.3) (layer "F.Cu") (net 25))
  (segment (start 34 68) (end 32 70) (width 0.3) (layer "F.Cu") (net 25))
  (segment (start 32 70) (end 32 73) (width 0.3) (layer "F.Cu") (net 25))

  (segment (start 41.5 59.67) (end 36 59.67) (width 0.3) (layer "F.Cu") (net 26))
  (segment (start 36 59.67) (end 33 62.67) (width 0.3) (layer "F.Cu") (net 26))
  (segment (start 33 62.67) (end 33 69) (width 0.3) (layer "F.Cu") (net 26))
  (segment (start 33 69) (end 34 70) (width 0.3) (layer "F.Cu") (net 26))
  (segment (start 34 70) (end 34 73) (width 0.3) (layer "F.Cu") (net 26))

  (segment (start 41.5 60.94) (end 35 60.94) (width 0.3) (layer "F.Cu") (net 27))
  (segment (start 35 60.94) (end 32 63.94) (width 0.3) (layer "F.Cu") (net 27))
  (segment (start 32 63.94) (end 32 69) (width 0.3) (layer "F.Cu") (net 27))
  (segment (start 32 69) (end 36 73) (width 0.3) (layer "F.Cu") (net 27))

  (via (at 50 65) (size 0.8) (drill 0.5) (layers "F.Cu" "B.Cu") (net 1))
  (via (at 55 65) (size 0.8) (drill 0.5) (layers "F.Cu" "B.Cu") (net 1))
  (via (at 45 65) (size 0.8) (drill 0.5) (layers "F.Cu" "B.Cu") (net 1))
  (via (at 40 65) (size 0.8) (drill 0.5) (layers "F.Cu" "B.Cu") (net 1))

  (zone (net 1) (net_name "GND") (layer "B.Cu") (tstamp 10000000-0000-0000-0000-000000000001)
    (hatch edge 0.508)
    (connect_pads (clearance 0.3))
    (min_thickness 0.254)
    (fill yes (thermal_gap 0.508) (thermal_bridge_width 0.508))
    (polygon
      (pts
        (xy 2 28)
        (xy 98 28)
        (xy 98 78)
        (xy 2 78)
      )
    )
  )

  (gr_text "JLCPCB: 2oz Copper" (at 10 75 0) (layer "Cmts.User")
    (effects (font (size 1 1) (thickness 0.15)))
  )

  (gr_text "Thermal Vias under TRIACs" (at 40 8 0) (layer "Cmts.User")
    (effects (font (size 0.8 0.8) (thickness 0.12)))
  )

)
